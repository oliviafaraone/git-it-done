<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="./assets/css/style.css" />
  <title>Git it Done</title>
</head>

<body class="flex-column min-100-vh">
  <header class="hero">
    <h1 class="app-title">Showing Issues for: <span id="repo-name"></span></h1>
    
    <div>
      <a href="./index.html" class="btn-back">
        Go Back
      </a>
    </div>
    
  </header>
  
  <main>
    <div id="issues-container" class="list-group">

    </div>
  
  </main>

  <script>
    var issueContainerEl = document.querySelector("#issues-container");

    var getRepoIssues= function (repo){
      var apiUrl = "https://api.github.com/repos/" + repo + "/issues?direction=asc";
      fetch(apiUrl).then(function(response){
        //request successful
        if (response.ok){
          response.json().then(function(data){
             // pass response data to dom function
            displayIssues(data);
          });
        } else {
        alert("There was a problem with your request!");
      }
    })
  };

    getRepoIssues("facebook/react");

  var displayIssues = function(issues){
    if (issues.length === 0) {
  issueContainerEl.textContent = "This repo has no open issues!";
  return;
}
    for (var i =0; i<issues.length; i++){
      //create a link element to take users to the issue on the page
      var issueEl=document.createElement("a");
      issueEl.classList="list-item flex-row justify-space-between align-center";
      issueEl.setAttribute=("href",issues[i].html_url);
      issueEl.setAttribute=("target","_blank");

      // create span to hold issue title
      var titleEl = document.createElement("span");
      titleEl.textContent = issues[i].title;

      // append to container
      issueEl.appendChild(titleEl);

      // create a type element
      var typeEl = document.createElement("span");

      // check if issue is an actual issue or a pull request
      if (issues[i].pull_request) {
        typeEl.textContent = "(Pull request)";
      } else {
        typeEl.textContent = "(Issue)";
      }

      // append to container
      issueEl.appendChild(typeEl);

      issueContainerEl.appendChild(issueEl);
    }

  };

  </script>
</body>

</html>